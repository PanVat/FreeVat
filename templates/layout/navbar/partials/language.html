<!-- Načtení překladů a souborů -->
{% load i18n static %}

<!-- Načtení aktuálního jazyka a dostupných jazyků -->
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}

<!-- Přepínač mezi jazyky -->
<div class="language group">

    <!-- Ostatní jazyky -->
    <div class="flag-dropdown">
        {% for language in languages %}
            {% if language.code != LANGUAGE_CODE %}
                <form action="{% url 'set_language' %}" method="post" class="toggle">
                    {% csrf_token %}
                    <input type="hidden" name="language" value="{{ language.code }}">
                    <input type="hidden" name="next" value="{{ request.path }}">

                    <!-- Přepínací tlačítko (vlajka jazyka) -->
                    <button type="submit" class="toggle">
                        <img src="{% static 'img/flags/' %}{{ language.code }}.svg"
                             alt="{{ language.code }}"
                             title="{{ language.name_local }}"
                             class="flag-img"/>
                    </button>
                </form>
            {% endif %}
        {% endfor %}
    </div>

    <!-- Aktuální jazyk -->
    <button type="button"
            class="flag-button"
            aria-haspopup="true">
        <img src="{% static 'img/flags/' %}{{ LANGUAGE_CODE }}.svg"
             alt="{{ LANGUAGE_CODE }}" class="flag-img"/>
    </button>
</div>

<!-- Přepínání jazyků -->
<script src="{% static 'js/web/language.js' %}"></script>